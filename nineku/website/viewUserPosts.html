{% extends "main.html" %}

{% block userPosts %}
{% if userPosts %}

<div class="row">
  {% for posts in userPosts %}
  <div class="col-sm-6 col-md-4">
    <div class="thumbnail">
      <div class="caption">
        <h3>{{posts.title}}</h3>

        <div style=""class="jumbotron">
          {{posts.dream|truncatechars:180}}
        </div>
        <div style="text-align:right;">
          <form action="" method="post">{% csrf_token %}
            <input type="hidden" name="id" value="{{posts.pk}}">
            <input type="hidden" name="user" value="{{request.session.username}}">
            <button id="{{posts.pk}}likebutton" type="submit" class="btn btn-default" name="likepost" onclick="changeHeart(this.id)">

              {% if request.session.username in userl and posts.pk in postl %}
              <i id = "{{posts.pk}}heart" class="fa fa-heart"></i>
              {% else %}
              <i id = "{{posts.pk}}heart" class="fa fa-heart-o"></i>
              {% endif %}
            </button>
          </form>
        </div>
        <p> <small>Mood: {{posts.mood}} </small></p>
      </p>  <small>Tags: #{{posts.tags}} </small></p>
      </p>  <small>{{posts.user}} </small></p>
      <p>  <button type="button" class="btn btn-info btn-small" data-toggle="modal" data-target="#{{posts.pk}}">Read More</button>
      </p>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="{{posts.pk}}" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{posts.title}}</h4>
      </div>
      <div class="modal-body">
        <p>{{posts.dream}}</p>
      </div>
      <div class="modal-footer">
        <p><small>#{{posts.tags}}</small></p>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}
</div>

{% else %}

<blockquote>
  <p> You've not posted anything yet </p>
  <p><small>Why don't you upload something <a href="/post"><b>here</b></a>?</small></p>
</blockquote>

{% endif %}
{% endblock %}
